<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>

	<title>Crear Facturas</title>
</h:head>

<h:body>


	 <h:form id="formGestionClientes">

               
              <p:linkButton outcome="/private/employee/crearFactura" value="Crear Factura" style="margin-right:20px;">
  		  		<f:param name="productId" value="10" />
			  </p:linkButton>
			  
			  <p:linkButton outcome="/private/employee/CreateUser" value="Crear Cliente" style="margin-right:20px;">
  		  		<f:param name="productId" value="10" />
			  </p:linkButton>
			  
			   <p:linkButton outcome="/private/employee/ListarFacturas" value="Listar Facturas" style="margin-right:20px;">
  		  		<f:param name="productId" value="10" />
			  </p:linkButton>
			  
			  <p:linkButton outcome="/private/employee/listarUsuario" value="Listar Clientes" style="margin-right:20px;">
  		  		<f:param name="productId" value="10" />
			  </p:linkButton>
			 
			 <p:linkButton outcome="/paginaPrincipal" value="Salir" style="margin-right:20px;">
  		  		<f:param name="productId" value="10" />
			  </p:linkButton>
			  <br></br>
			  <br></br>
			  <br></br>

            </h:form>	
	
	
	
	
	

	<div id="contenedorCliente">
		  
		 <h:panelGroup id="main-content">
			<h:panelGroup id="user-select">
				<p:panelGrid columns="1" layout="flex" styleClass="showcase-text-align-center"
				>
		  
					 <h:form>
						<h3>Seleccione un Cliente</h3>
			    		<div class="p-col-11 p-justify-center" style="text-align:center;">
			    			<p:outputLabel for="user-dni" style="display:none" value="Cédula:" />
			            	<p:inputText id="user-dni" value="#{clientBean.cedula}" placeholder="Cédula" styleClass="p-col-5"/>
				            <p:commandButton value="Buscar" styleClass="p-col-2" update="users"/>
			    		</div>
					</h:form>
					<h:form id="users">
						<p:dataTable value="#{clientBean.cliente}" var="u" style="text-align: center;"
						rows="5" paginator="true" rowsPerPageTemplate="5, 10, 15">
							<p:column>
								<f:facet name="header">Cédula</f:facet>
								#{u.dni}
							</p:column>
							<p:column>
								<f:facet name="header">Nombre</f:facet>
								#{u.name}
							</p:column>
							<p:column>
								<f:facet name="header">Apellido</f:facet>
								#{u.lastname}
							</p:column>
							<p:column>
								<f:facet name="header">Correo</f:facet>
								#{u.email}
							</p:column>
							<p:column>
								<f:facet name="header">Acción</f:facet>
								<p:commandButton value="Seleccionar" action="#{billHeadBean.setUser(u)}" update="clientesel"
								/>
							</p:column>
						</p:dataTable>
					</h:form>
					
					
					<h:form id="clientesel">
							<h2><h:outputText value="Facturación"/></h2>
							<h:panelGroup style="text-align:center;" styleClass="col-11">
								<p:panel header="Usuario Seleccionado" style="text-align:center; margin: 0 auto;">
									<p:panelGrid style="width:100%">
							       		<p:row>
							       			<p:column styleClass="my-f-w">Cédula:</p:column>
							        		<p:column colspan="3">
							        			<h:outputText value="#{billHeadBean.user.dni}"/>
							        		</p:column>
										</p:row>
										
										<p:row>
							       			<p:column styleClass="my-f-w">Nombre:</p:column>
							        		<p:column colspan="3">
							        			<h:outputText value="#{billHeadBean.user.name}"/>
							        		</p:column>
										</p:row>
										
										<p:row>
							       			<p:column styleClass="my-f-w">Apellido:</p:column>
							        		<p:column colspan="3">
							        			<h:outputText value="#{billHeadBean.user.lastname}"/>
							        		</p:column>
										</p:row>
										
										<p:row>
											<p:column styleClass="my-f-w">Correo:</p:column>
											<p:column colspan="3">
												<h:outputText value="#{billHeadBean.user.email}"/>
											</p:column>
										</p:row>
									</p:panelGrid>
								</p:panel>
							</h:panelGroup>
						</h:form>
					
					
				</p:panelGrid>
			</h:panelGroup>
			<h:panelGroup id="user-selected">
				<h:panelGroup >
					<p:row>
						
					</p:row>
		  			<p:row>
						<h2>Crear Facturas</h2>
						<h:form id="Busqueda">      
						    <p:panel id="panel" header="Search Form" style="margin-bottom:10px;">
						        <p:messages id="messages" />
						 
						        <h:panelGrid columns="4" cellpadding="5">
						            <h:outputLabel for="nombre" value="Buscar Producto: " />
						            <p:inputText id="nombre" value="#{productBean.buscarPorNombre}" required="true" label="Nombre del producto">
						                <f:validateLength minimum="2" />
						            </p:inputText>
								</h:panelGrid>
						    </p:panel>
						 
						    <h:panelGrid columns="1">
						        <p:commandButton value="Buscar Producto" id="buscarProducto"  action="#{productBean.buscarPorNombreProductodBodega}" update="Busqueda" style="margin-right:20px;" styleClass="ui-priority-primary" />
						    </h:panelGrid>
						    
						    <div id="contenedorProductos">
						    	<p:dataTable id="tablaProd"  var="prod" value="#{productBean.productosBodegas}"
									 headerClass="cabeceraTabla" rowClasses="filaPar,filaImpar">
									
									<p:column headerText="Codigo Producto">
						            	<h:outputText value="#{prod.product_ware_pro.cod_pro}"/>
						            </p:column>
						           	
						           	<p:column headerText="Nombre">
						               	<h:outputText value="#{prod.product_ware_pro.productName}"/>
						           	</p:column>
						           	
						           	<p:column headerText="Precio del Producto">
						               <h:outputText value="#{prod.product_ware_pro.productPrice}"/>
						           	</p:column>
						            
						            <p:column headerText="Descripcion">
						               <h:outputText value="#{prod.product_ware_pro.proDescription}" />
						            </p:column>
						            
						            <p:column headerText="Bodega: ">
						               <h:outputText value="#{prod.warehouse_ware_pro.wareHouseName}" />
						            </p:column>
						               
						        	<p:column headerText="Cantidad a Pedir">
							        	<p:inputText id="cantidad" value="#{billDetailBean.cantidadCompra}" required="true" label="Nombre del producto" type="text">
						            	</p:inputText>
						            </p:column> 
						            
						            <p:column headerText="Agregar Producto">
						           		<p:commandButton value="Agregar" id="agregarProducto"  action="#{billDetailBean.addDetallesFactura(prod)}" update="facturaDetalle" ajax="false"  style="margin-right:20px;" styleClass="ui-priority-primary"/>
						            </p:column>
						            
						    	</p:dataTable>
					    	</div>  
						</h:form>
						
						<h:form id="facturaDetalle">      
						    <p:panel id="panel2" header="Detalles de los producto para Facturación" style="margin-bottom:10px;">
						       
						        
						        <div id="contenedorDetalles">
						    	<p:dataTable id="tablaDet"  var="det" value="#{billDetailBean.detallesFac}"
									 headerClass="cabeceraTabla" rowClasses="filaPar,filaImpar">
									
									<p:column headerText="Cantidad Compra">
						            	<h:outputText value="#{det.amount}"/>
						            </p:column>
									
									<p:column headerText="Nombre Producto">
						            	<h:outputText value="#{det.pro_war_detail.productName}"/>
						            </p:column>
						           	
						           	<p:column headerText="Precio Unitario">
						               	<h:outputText value="#{det.unitPrice}"/>
						           	</p:column>
						           	
						           	<p:column headerText="Subtotal">
						               <h:outputText value="#{det.subtotal}"/>
						           	</p:column>
					
						          
						    	</p:dataTable>
					    	</div>  
						 	</p:panel>
						</h:form>
						
						
					</p:row>
		    
				</h:panelGroup>
			</h:panelGroup>
			
		</h:panelGroup>
		  
		  
		  
		  
		  
		  
		  
		  
		
	</div>  
	
	
	
	
		
</h:body>

</html>