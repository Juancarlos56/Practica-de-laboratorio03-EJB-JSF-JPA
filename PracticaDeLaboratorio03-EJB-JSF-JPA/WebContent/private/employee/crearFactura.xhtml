<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>

<h:body>

	<div id="contenedorCliente">
		  
		  <p:panel id="panel" header="Search Form" style="margin-bottom:10px;">
	        <p:messages id="messages" />
	 
	        <h:panelGrid columns="4" cellpadding="5">
	            <h:outputLabel for="nombre" value="Buscar Producto: " />
	            <p:inputText id="nombre" value="#{productBean.buscarPorNombre}" required="true" label="Nombre del producto">
	                <f:validateLength minimum="2" />
	            </p:inputText>
			</h:panelGrid>
	    </p:panel>
		  
		  
		  <h:form id="Cliente"> 
				<h3>Buscar Cliente: </h3>
				<p></p>
				<h:inputText id="cedulaBuscar" value="#{personaBean.cedula}" type="text"></h:inputText>
				<h:commandButton value="buscarPersona" action="#{personaBean.buscarPersonaCedula}">
					<f:ajax execute="cedulaBuscar" render="salidaNombre salidaApellido salidaCedula salidaTelefono salidaDireccion" />
				</h:commandButton>
				<p></p>
				<h:outputLabel for="salidaNombre" value="Nombre:" ></h:outputLabel>
				<h:inputText id="salidaNombre" value="#{personaBean.nombre}"></h:inputText>
		        <h:outputLabel for="salidaApellido" value="Apellido:"></h:outputLabel>
		        <h:inputText id="salidaApellido" value="#{personaBean.apellido}"></h:inputText>
		        <p></p>
		        <h:outputLabel for="salidaTelefono" value="Telefono:" ></h:outputLabel>
		        <h:inputText id="salidaTelefono" value="#{personaBean.telefono}"></h:inputText>
		        <h:outputLabel for="salidaDireccion" value="Direccion:" ></h:outputLabel>
		        <h:inputText id="salidaDireccion" value="#{personaBean.direccion}"></h:inputText>
		  </h:form>
	</div>  
	
	
	<h:form id="Busqueda">      
	    <p:panel id="panel" header="Search Form" style="margin-bottom:10px;">
	        <p:messages id="messages" />
	 
	        <h:panelGrid columns="4" cellpadding="5">
	            <h:outputLabel for="nombre" value="Buscar Producto: " />
	            <p:inputText id="nombre" value="#{productBean.buscarPorNombre}" required="true" label="Nombre del producto">
	                <f:validateLength minimum="2" />
	            </p:inputText>
			</h:panelGrid>
	    </p:panel>
	 
	    <h:panelGrid columns="1">
	        <p:commandButton value="Buscar Producto" id="buscarProducto"  action="#{productBean.buscarPorNombre}" update="Busqueda" style="margin-right:20px;" styleClass="ui-priority-primary" />
	    </h:panelGrid>
	    
	    <div id="contenedorProductos">
	    	<p:dataTable id="tablaProd"  var="prod" value="#{productBean.productos}"
				 headerClass="cabeceraTabla" rowClasses="filaPar,filaImpar">
				
				<p:column headerText="Codigo Producto">
	            	<h:outputText value="#{prod.cod_pro}"/>
	            </p:column>
	           	
	           	<p:column headerText="Nombre">
	               	<h:outputText value="#{prod.productName}"/>
	           	</p:column>
	           	
	           	<p:column headerText="Precio del Producto">
	               <h:outputText value="#{prod.productPrice}"/>
	           	</p:column>
	            
	            <p:column headerText="Descripcion">
	               <h:outputText value="#{prod.proDescription}" />
	            </p:column>
	               
	        	<p:column headerText="Cantidad a Pedir">
		        	<p:inputText id="cantidad" value="#{billDetailBean.cantidadCompra}" required="true" label="Nombre del producto" type="text">
	            	</p:inputText>
	            </p:column> 
	            
	            <p:column headerText="">
	           		<p:commandButton value="Agregar" id="agregarProducto"  actionListener="#{billDetailBean.addDetallesFactura(prod)}" update="facturaDetalle" style="margin-right:20px;" styleClass="ui-priority-primary" />
	            </p:column>
	            
	    	</p:dataTable>
    	</div>  
	</h:form>
	
	<h:form id="facturaDetalle">      
	    <p:panel id="panel2" header="Search Form" style="margin-bottom:10px;">
	        <p:messages id="messagesDetalles" />
	 	</p:panel>
	</h:form>
	
</h:body>

</html>